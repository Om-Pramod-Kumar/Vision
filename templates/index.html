<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Image Classifier</title>

<link rel="manifest" href="/static/manifest.json">
<meta name="theme-color" content="#0ea5e9">
<link rel="apple-touch-icon" href="/static/icons/icon-192.png">
<link rel="apple-touch-icon" href="/static/icons/icon-512.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Vision">


<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/static/service-worker.js')
        .then(() => console.log('Service Worker Registered'));
    });
  }
</script>


    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(to bottom right, #0f172a, #1e293b);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
        }
        .card {
            width: 450px;
            padding: 25px;
            background: rgba(255,255,255,0.08);
            border-radius: 18px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 25px rgba(0,0,0,0.4);
            text-align: center;
        }
        <button id="installBtn" 
style="
 position: fixed;
 bottom: 20px;
 right: 20px;
 background:#38bdf8;
 border:none;
 padding:15px 20px;
 border-radius:50px;
 font-weight:bold;
 display:none;
 cursor:pointer;">
Install App
</button>

        .dropzone {
            border: 2px dashed #38bdf8;
            padding: 25px;
            border-radius: 14px;
            cursor: pointer;
        }
        #preview, #cameraPreview {
            margin-top: 20px;
            display: none;
            width: 100%;
            border-radius: 10px;
        }
        .btn {
            margin-top: 12px;
            padding: 12px;
            width: 100%;
            border: none;
            border-radius: 10px;
            background: #38bdf8;
            color: black;
            font-weight: bold;
            cursor: pointer;
        }
        .btn:hover { background: #0ea5e9; }
        .loader {
            display: none;
            margin-top: 20px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #38bdf8;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 0.7s linear infinite;
            margin-left: auto;
            margin-right: auto;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        .result-box {
            margin-top: 25px;
            padding: 15px;
            background: rgba(0,0,0,0.25);
            border-radius: 12px;
        }
    </style>
</head>

<body>
    <button id="installBtn" style="
  position:fixed;
  right:18px;
  bottom:100px;
  z-index:9999;
  display:none;
  background:#0ea5e9;
  color:#072;
  border:none;
  padding:12px 18px;
  border-radius:40px;
  font-weight:700;
  box-shadow:0 8px 24px rgba(14,165,233,0.18);
">Install Vision</button>

<div class="card">

    <h2>AI Image Classifier</h2>

    <!-- Language Selector -->
    <select id="languageSelect" class="btn" style="background:#d946ef;color:white;">
        <option value="en-US">English</option>
        <option value="hi-IN">Hindi</option>
        <option value="mr-IN">Marathi</option>
        <option value="bn-IN">Bengali</option>
        <option value="ta-IN">Tamil</option>
        <option value="te-IN">Telugu</option>
        <option value="kn-IN">Kannada</option>
        <option value="es-ES">Spanish</option>
        <option value="fr-FR">French</option>
    </select>

    <!-- Voice Assistant -->
    <button id="voiceBtn" class="btn" style="background:#d946ef;">ðŸŽ¤ Voice Assistant</button>
    <div id="listeningIndicator" style="display:none;">Listeningâ€¦</div>

    <form id="uploadForm" action="/predict" method="POST" enctype="multipart/form-data">

        <!-- Drag & Drop -->
        <div class="dropzone" id="dropzone">
            Drag & Drop Image or Click to Upload
            <input type="file" id="fileInput" name="image" accept="image/*" style="display:none;">
        </div>

        <!-- Camera -->
        <button type="button" id="openCamera" class="btn">Use Camera</button>
        <video id="camera" autoplay style="display:none;"></video>
        <button type="button" class="btn" id="captureBtn" style="display:none;">Capture</button>

        <img id="preview">

        <div class="loader" id="loader"></div>

        <button type="submit" class="btn" id="predictBtn">Predict</button>
    </form>

    {% if prediction %}
        <script>
            let msg = new SpeechSynthesisUtterance(
                "Prediction: {{ prediction }} with {{ confidence }} percent confidence."
            );
            msg.lang = document.getElementById("languageSelect").value;
            window.speechSynthesis.speak(msg);
        </script>

        <div class="result-box">
            <h3>Prediction: {{ prediction }}</h3>
            <p>Confidence: {{ confidence }}%</p>
            <img src="{{ image_path }}" style="width:100%; border-radius:10px; margin-top:10px;">
        </div>
    {% endif %}

</div>

<script src="/static/script.js"></script>
<nav id="bottomNav" style="
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  height:64px;
  background:rgba(8,12,20,0.9);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top:1px solid rgba(255,255,255,0.04);
  backdrop-filter:blur(6px);
">
  <button class="nav-btn" data-action="home" style="background:none;border:none;color:#cfe7ff;">Home</button>
  <button class="nav-btn" data-action="camera" style="background:none;border:none;color:#cfe7ff;">Camera</button>
  <button class="nav-btn" data-action="upload" style="background:none;border:none;color:#cfe7ff;">Upload</button>
  <button class="nav-btn" data-action="voice" style="background:none;border:none;color:#cfe7ff;">Voice</button>
</nav>

</body>
</html>
